angular.module("ui-highcharts",[]),angular.module("ui-highcharts").factory("$uiHighchartsAddWatchers",["$uiHighchartsUtilsService","$window",function(a,b){var c=function(b,c){var d=a.difference(c,b.series,function(a){return a.name});d.forEach(function(a){b.addSeries(a,!1)});var e=b.series.filter(function(a){return"Navigator"!==a.name});e.forEach(function(a,b){var d=c[b];a.visible!==d.visible&&a.setVisible(d.visible,!1),angular.equals(a.options.data,d.data)||a.setData(d.data,!1),a.type!==d.type&&a.update({type:d.type},!1)}),b.redraw()},d=function(b,c){var d=b.series.filter(function(a){return"Navigator"!==a.name}),e=a.difference(d,c,function(a){return a.name});e.forEach(function(a){a.remove(!1)}),b.redraw()},e=a.debounce(function(a,b){a.series.forEach(function(a,c){b[c]&&a.setData(b[c].data,!1)}),a.redraw()},200),f=function(a,b){b.$watch("series",function(e,f){void 0!==e&&(f||(f={length:0}),(e.length||0)>=(f.length||0)?c(a,b.series):(e.length||0)<(f.length||0)&&d(a,b.series))},!0)},g=function(a,b){b.$watch(function(){return(b.series||[]).map(function(a){return a.disabled})},function(c){c.length&&c.some(function(a){return void 0!==a})&&(c.forEach(function(c,d){var e,f;void 0!==c&&(e=b.series[d].name,f=a.series.filter(function(a){return a.name===e})[0],f&&f.setVisible(!c,!1))}),a.redraw())},!0)},h=function(a,b,c){c.redraw&&b.$watch("redraw",function(c){void 0!==c&&e(a,b.series)},!0)},i=function(a,b){b.$watch("loading",function(b){b?a.showLoading():a.hideLoading()})},j=function(a){angular.element(b).on("resize",function(){console.log("chart will reflow due to window resize event");var c=b.innerWidth-100+"px";angular.element(a.container).css("width",c)})},k=function(a,b,c){var d;b.$watch("options."+c,function(e,f){e&&e!==f&&(d=Array.isArray(b.options[c])?b.options[c]:[b.options[c]],a[c].forEach(function(a,b){a.update(d[b])}))},!0)};return function(a,b,c){f(a,b),h(a,b,c),g(a,b),i(a,b),k(a,b,"xAxis"),k(a,b,"yAxis"),j(a)}}]),angular.module("ui-highcharts").factory("$uiHighchartsHandleAttrs",["$timeout",function(a){var b=function(a,b,c){var d={};d[c]={},$.extend(!0,a.options,d),b[c]&&(a.options[c].text=b[c]),void 0===a.options[c].text&&(a.options[c].text="")},c=function(a,b){b.type&&$.extend(!0,a.options,{chart:{type:b.type}})},d=function(b,c,d,e){var f;c[d]&&(f={series:{point:{events:{}}}},("select"===e||"unselect"===e)&&(f.series.allowPointSelect=!0),f.series.point.events[e]=function(){b[d]({point:this}),a(function(){b.$apply()})},$.extend(!0,b.options.plotOptions,f))},e=function(a,b){b.legendItemClick&&$.extend(!0,a.options.plotOptions,{series:{events:{legendItemClick:function(){return a.legendItemClick({series:this}),!1}}}})};return function(a,f){a.options.plotOptions=a.options.plotOptions||{},b(a,f,"title"),b(a,f,"subtitle"),c(a,f),e(a,f),d(a,f,"pointClick","click"),d(a,f,"pointSelect","select"),d(a,f,"pointUnselect","unselect"),d(a,f,"pointMouseout","mouseOut"),d(a,f,"pointMousemove","mouseMove")}}]),angular.module("ui-highcharts").factory("$uiHighchartsTransclude",["$compile","$rootScope",function(a,b){var c=function(c,d){var e=a(c),f=d.$parent.$new();return function(){var a=$.extend(f,this),c=$(e(a));return b.$$phase=null,a.$apply(),$("<div></div>").append(c).html()}},d=function(a,b){$.extend(!0,b.options,{tooltip:{useHTML:!0,formatter:c(a,b)}})},e=function(a,b,d){var e={};e[d]=a.toArray().map(function(a){var d={title:{},labels:{}},e=$(a),f=$(a).find("labels");return e.attr("title")&&(d.title.text=e.attr("title")),void 0!==e.attr("opposite")&&"false"!==e.attr("opposite")&&(d.opposite=!0),f&&(d.labels.formatter=c(f.html(),b)),d}),b.options[d]&&(b.options[d]=Array.isArray(b.options[d])?b.options[d]:[b.options[d]]),$.extend(!0,b.options,e)};return function(a,b){var c=b.filter("tooltip").html(),f=b.filter("x-axis"),g=b.filter("y-axis");c&&d(c,a),f.length&&e(f,a,"xAxis"),g.length&&e(g,a,"yAxis")}}]),angular.module("ui-highcharts").service("$uiHighchartsUtilsService",function(){this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}},this.difference=function(a,b,c){return a.filter(function(a){return b.every(function(b){return c(a)!==c(b)})})}}),!function(){var a=function(a){return["$uiHighChartsManager",function(b){return{restrict:"EAC",transclude:!0,replace:!0,template:"<div></div>",scope:{options:"=?",series:"=",redraw:"=",loading:"=",start:"=",end:"=",pointClick:"&",pointSelect:"&",pointUnselect:"&",pointMouseout:"&",pointMousemove:"&",legendItemClick:"&"},link:function(c,d,e,f,g){b.createInstance(a,d,c,e,g)}}}]};angular.module("ui-highcharts").directive("uiChart",a("Chart")).directive("uiStockChart",a("StockChart")).directive("uiMap",a("Map"))}(),function(){"use strict";function a(a,b,c){function d(d,e,f,g,h){f.options=$.extend(!0,f.options,{chart:{renderTo:e[0]}}),b(f,h()),c(f,g);var i=new Highcharts[d](f.options);if(a(i,f,g),g.id&&f.$parent){if(f.$parent[g.id])throw new Error("A HighChart object with reference "+g.chart+" has already been initialized.");f.$parent[g.id]=i}}var e={createInstance:d};return e}angular.module("ui-highcharts").factory("$uiHighChartsManager",a),a.$inject=["$uiHighchartsAddWatchers","$uiHighchartsTransclude","$uiHighchartsHandleAttrs"]}();